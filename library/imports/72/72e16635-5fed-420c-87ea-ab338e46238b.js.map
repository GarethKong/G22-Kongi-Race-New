{"version":3,"sources":["assets/Scripts/facebook/FBGlobal.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import FBConfig from \"./FBConfig\";\nimport Component = cc.Component;\nimport ccclass = cc._decorator.ccclass;\nimport SoundManager from \"../Ultilities/SoundManager\";\nimport GameState from \"../Common/GameState\";\n\n@ccclass\nexport default class FBGlobal extends Component {\n\n    static _ins: FBGlobal\n\n    static get instance(): FBGlobal {\n        return this._ins || new FBGlobal;\n    }\n\n    onLoad() {\n        FBGlobal._ins = this;\n    }\n\n    //1. ADS SECTION\n    // loadBannerAds -Banner don't need show\n    // loadAdsInterestial - showAdsInterestial\n    // loadVideoAdsFirst - showAdsVideo\n    public loadBannerAds() {\n        if (typeof FBInstant === \"undefined\") return;\n        if (!FBConfig.isSupportBannerAds()) {\n            return;\n        }\n        FBInstant.loadBannerAdAsync(\n            FBConfig.bannerId\n        ).then(() => {\n            console.log('success');\n        });\n    }\n\n    public loadAdsInterestial() {\n        if (typeof FBInstant === \"undefined\") return;\n        if (!FBConfig.isSupportInterstitial()) {\n            return;\n        }\n        FBInstant.getInterstitialAdAsync(\n            FBConfig.interstitialId\n        )\n            .then(function (interstitial: any) {\n                console.log(\"load inter ads đã gọi\");\n                FBConfig.preloadedInterstitial = interstitial;\n                return interstitial.loadAsync();\n            })\n            .catch(function (err: any) {\n                console.error(\"Interstitial failed to preload: \" + err.message);\n            });\n    }\n\n    public loadVideoAdsFirst() {\n        if (typeof FBInstant === \"undefined\") return;\n        if (!FBConfig.isSupportRewardVideo()) {\n            return;\n        }\n        FBInstant.getRewardedVideoAsync(\n            FBConfig.videoAdsID\n        )\n            .then(function (rewarded: any) {\n                console.log(\"Video\" + FBConfig.preloadedRewardedVideo);\n                FBConfig.preloadedRewardedVideo = rewarded;\n                return rewarded.loadAsync();\n            })\n            .catch(function (err: any) {\n                console.error(\"Rewarded video failed to preload: \" + err.message);\n                FBConfig.numberTriedAds++;\n                if (FBConfig.numberTriedAds <= 10) {\n                    FBGlobal.instance.loadVideoAdsFirst();\n                }\n            });\n    }\n\n    public showAdsInterestial() {\n        if (FBConfig.preloadedInterstitial == null) {\n            return;\n        }\n        console.log(\"Show ads inter already\");\n        FBConfig.preloadedInterstitial\n            .showAsync()\n            .then(function () {\n                console.log(\"show inter ads đã gọi\");\n            })\n            .catch(function (e: any) {\n                FBConfig.numberTriedAds++;\n                if (FBConfig.numberTriedAds <= 10) {\n                    console.log('Reload inter ads at init r nhe')\n                    FBGlobal.instance.loadAdsInterestial();\n                }\n            });\n    }\n\n    public showAdsVideo(onCLoseCallback: any, onFailedCallBack: any, arg: any) {\n        console.log(\"Video\" + FBConfig.preloadedRewardedVideo);\n        SoundManager.Instance.pauseBGM();\n        if (FBConfig.preloadedRewardedVideo === null) {\n            FBGlobal.instance.loadVideoAdsFirst()\n        }\n        FBConfig.preloadedRewardedVideo\n            .showAsync()\n            .then(function () {\n                SoundManager.Instance.resumeBGM();\n                onCLoseCallback(arg);\n                FBGlobal.instance.loadVideoAdsFirst()\n            })\n            .catch(function (e) {\n                SoundManager.Instance.resumeBGM();\n                console.error(e.message);\n                onFailedCallBack(\"error\");\n                if (FBConfig.numberTriedAds <= 10) {\n                    console.log('Reload video ads r nhe')\n                    FBGlobal.instance.loadVideoAdsFirst()\n                    FBConfig.numberTriedAds++;\n                }\n            });\n    }\n\n    //2.SHARE- INVITE - TOURNAMENT SECTION\n    // inviteAsync - Invite and play with friends\n    // shareGame - Share wall with image\n    // postSessionScore - Tournament function\n    public inviteAsync(onSuccessCallback: any, onFailedCallBack: any) {\n        if (typeof FBInstant === 'undefined') return;\n        let self = this;\n        FBInstant.context\n            .chooseAsync()\n            .then(function () {\n                FBInstant.updateAsync({\n                    action: 'CUSTOM',\n                    cta: 'Play',\n                    image: FBConfig.getBase64Image(),\n                    text: {\n                        default: \"Come and get new challenge!!\",\n                        localizations: {}\n                    },\n                    template: 'pass_score',\n                    data: {myReplayData: '...'},\n                    strategy: 'IMMEDIATE',\n                    notification: 'NO_PUSH',\n                }).then(() => {\n                    console.log('invite then already');\n                    onSuccessCallback();\n                }).catch(function (e) {\n                    console.log('catch invite error ' + e);\n                    onFailedCallBack();\n                });\n            }).catch(function (e) {\n            onFailedCallBack();\n        });\n    }\n\n    payload: FBInstant.CustomUpdatePayload = {\n        action: 'CUSTOM',\n        text: \"Come and play with us!\",\n        // text: content,\n        cta: \"Play\",\n        // cta: ctaText,\n        image: FBConfig.getBase64Image(),\n        template: 'play_turn',\n        // strategy: 'IMMEDIATE',\n        data: {myReplayData: '...'},\n        notification: 'PUSH',\n    };\n\n    public sendInvite(onSuccessCallback: any, onFailedCallBack: any, playerId: string) {\n        let self = this;\n        FBInstant.context\n            .createAsync(playerId)\n            .then(function () {\n                console.log(FBInstant.context.getID());\n                FBInstant.updateAsync(self.payload).then(() => {\n                    console.log('invite then already');\n                    onSuccessCallback();\n                }).catch(function (e) {\n                    console.log('catch invite error ' + e);\n                    onFailedCallBack();\n                });\n            });\n    }\n\n    public shareGame(callbackSuccess ?: any) {\n        if (typeof FBInstant === 'undefined') return;\n        console.log('Share game already');\n        let self = this;\n        //if (typeof FBInstant === 'undefined') return;\n        // var successCallback = params.successCallback;\n        // var failCallback = params.failCallback;\n        FBInstant.shareAsync({\n            image: FBConfig.getBase64Image(),\n            intent: 'SHARE',\n            text: 'Come and play with us!',\n            data: {myReplayData: '...'},\n        }).then(() => {\n            callbackSuccess();\n            console.log('Share game already1');\n        }).catch((error: any) => {\n            console.log('Share game already fail' + error);\n        });\n    }\n\n    public postSessionScore(num: any) {\n        if (typeof FBInstant === 'undefined') return;\n        FBInstant.postSessionScoreAsync(num);\n    }\n\n    //3. COMMON SECTION\n    // createShortcutAsync - Create game shortcut in section after gameover\n    // haptic - Haptic function\n    public createShortcutAsync() {\n        if (typeof FBInstant === \"undefined\") return;\n        FBInstant.canCreateShortcutAsync()\n            .then(function (canCreateShortcut: any) {\n                if (canCreateShortcut) {\n                    FBInstant.createShortcutAsync()\n                        .then(function () {\n                            console.log(\"create shortcut\");\n                        })\n                        .catch(function () {\n                            console.log(\"create shortcut fail\");\n                        });\n                }\n            });\n    }\n\n    public haptic() {\n        if (typeof FBInstant === \"undefined\") return;\n        if (GameState.isVibrateOn == true) {\n            //   FBInstant.performHapticFeedbackAsync();\n        }\n    }\n\n    //3. COMMON SECTION\n    // createShortcutAsync - Create game shortcut in section after gameover\n    // haptic - Haptic function\n    public getFBScore() {\n        if (typeof FBInstant === \"undefined\") return;\n        FBConfig.fbName = FBInstant.player.getName();\n        FBConfig.fbPhoto = FBInstant.player.getPhoto();\n        FBInstant.player\n            .getDataAsync([\"data\"])\n            .then((data: any) => {\n                FBConfig.fbScore = data[\"maxscore\"] || 0;\n                FBConfig.metadata = data[\"metadata\"] || 0;\n                // if (callback) {\n                //     callback(FBConfig.fbScore, FBConfig.metadata);\n                // }\n            })\n            .catch((error: any) => {\n            });\n    }\n\n    public saveFBData(dataString) {\n        if (typeof FBInstant === \"undefined\") return;\n        FBInstant.player.setDataAsync({data: dataString})\n            .then(() => {\n                FBConfig.fbScore = dataString[\"bestScore\"];\n                console.log(\"save score to fb player successed\");\n            })\n            .catch(error => {\n                console.log(error.message);\n            });\n        this.saveBestScore(dataString);\n    }\n\n    public saveBestScore(dataString) {\n        let strNameAndPhoto = FBConfig.fbName + \"_\" + FBConfig.fbPhoto;\n        let leaderboardName = \"my_leaderboard.\" + FBInstant.context.getID();\n        FBInstant.getLeaderboardAsync(\n            leaderboardName\n        )\n            .then((leaderboard) => {\n                console.log(\" save score to fb successed on setScoreAsync\");\n                return leaderboard.setScoreAsync(dataString[\"bestScore\"], strNameAndPhoto);\n            })\n            .then((entry) => {\n                console.log(\"save score to fb successed get entry\");\n            })\n            .catch((error) => {\n                console.log(\"Save scrore ranking error\" + error);\n            });\n    }\n}\n"]}